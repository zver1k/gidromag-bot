"""
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Telegram –±–æ—Ç–∞
"""

import os
from typing import List

# –¢–æ–∫–µ–Ω—ã (–±–µ—Ä—É—Ç—Å—è –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è)
TELEGRAM_TOKEN = os.environ.get("TELEGRAM_TOKEN")
YANDEX_DISK_TOKEN = os.environ.get("YANDEX_DISK_TOKEN")

# –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
BASE_FOLDER = "–§–æ—Ç–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è"
WEBHOOK_URL = os.environ.get("WEBHOOK_URL", "https://gidromag-bot.onrender.com/")
PORT = int(os.environ.get("PORT", 8443))

# –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
MAX_FILE_SIZE = 10 * 1024 * 1024  # 10MB
MAX_PHOTOS_PER_INVOICE = 50

# –ü–æ–≤–µ–¥–µ–Ω–∏–µ –±–æ—Ç–∞
AUTO_EXIT_AFTER_PHOTO = False  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã—Ö–æ–¥–∏—Ç—å –∏–∑ –Ω–∞–∫–ª–∞–¥–Ω–æ–π –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ
PHOTOS_FOR_AUTO_EXIT = 0  # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–æ—Ç–æ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã—Ö–æ–¥–∞ (0 = –æ—Ç–∫–ª—é—á–µ–Ω–æ)
SHOW_PHOTO_COUNT = True  # –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–æ—Ç–æ

# –í–∞–ª–∏–¥–∞—Ü–∏—è
INVOICE_MIN_LENGTH = 3
INVOICE_MAX_LENGTH = 50
INVOICE_PATTERN = r'^[–∞-—è–ê-–Ø—ë–Åa-zA-Z0-9 _-]{3,50}$'

# –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
TEMP_DIR = "/tmp"
TEMP_FILE_CLEANUP_INTERVAL = 3600  # 1 —á–∞—Å –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
TEMP_FILE_MAX_AGE = 3600  # 1 —á–∞—Å –≤ —Å–µ–∫—É–Ω–¥–∞—Ö

# –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ ID)
ADMIN_IDS: List[int] = [
    177611260,  # –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
]

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
LOG_LEVEL = "INFO"
LOG_FORMAT = "%(asctime)s - %(name)s - %(levelname)s - %(message)s"

# –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
ERROR_MESSAGES = {
    "quota_exceeded": "‚ùå –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫–∞\n\n–û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –º–µ—Å—Ç–∞.",
    "network_error": "‚ùå –ü—Ä–æ–±–ª–µ–º–∞ —Å —Å–µ—Ç—å—é\n\n–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.",
    "access_denied": "‚ùå –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫—É\n\n–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞.",
    "file_too_large": "‚ùå –§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π!\n\n–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: {max_size}MB\n–¢–µ–∫—É—â–∏–π —Ä–∞–∑–º–µ—Ä: {current_size}MB",
    "unsupported_format": "‚ùå –ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞!\n\n–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ: JPG, JPEG, PNG",
    "invoice_limit_reached": "‚ùå –î–æ—Å—Ç–∏–≥–Ω—É—Ç –ª–∏–º–∏—Ç —Ñ–æ—Ç–æ –¥–ª—è –Ω–∞–∫–ª–∞–¥–Ω–æ–π '{invoice}'\n\n–ú–∞–∫—Å–∏–º—É–º: {max_photos} —Ñ–æ—Ç–æ\n–¢–µ–∫—É—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ: {current_photos}\n\n–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /reset –¥–ª—è —Å–±—Ä–æ—Å–∞ –∏ –Ω–∞—á–∞–ª–∞ –Ω–æ–≤–æ–π –Ω–∞–∫–ª–∞–¥–Ω–æ–π.",
    "invoice_validation": "‚ùå {error}\n\n–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É /reset –¥–ª—è —Å–±—Ä–æ—Å–∞.",
}

# –£—Å–ø–µ—à–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
SUCCESS_MESSAGES = {
    "invoice_saved": "‚úÖ –ù–∞–∫–ª–∞–¥–Ω–∞—è '{invoice}' —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞.\n\n–¢–µ–ø–µ—Ä—å –ø—Ä–∏—à–ª–∏—Ç–µ —Ñ–æ—Ç–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è.",
    "photo_saved": "‚úÖ –§–æ—Ç–æ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ!\n\nüìã –ù–∞–∫–ª–∞–¥–Ω–∞—è: {invoice}\nüìÅ –ü–∞–ø–∫–∞: {folder}\nüì∏ –§–∞–π–ª: {filename}\nüìè –†–∞–∑–º–µ—Ä: {size}\nüìä –§–æ—Ç–æ –≤ –Ω–∞–∫–ª–∞–¥–Ω–æ–π: {current}/{max}",
    "invoice_reset": "üîÑ –ù–∞–∫–ª–∞–¥–Ω–∞—è '{invoice}' —Å–±—Ä–æ—à–µ–Ω–∞.\nüì∏ –ë—ã–ª–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ —Ñ–æ—Ç–æ: {count}\n\n–ü—Ä–∏—à–ª–∏—Ç–µ –Ω–æ–≤—ã–π –Ω–æ–º–µ—Ä –Ω–∞–∫–ª–∞–¥–Ω–æ–π.",
    "folder_created": "‚úÖ –°–æ–∑–¥–∞–Ω–∞ –ø–∞–ø–∫–∞ –Ω–∞ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫–µ: {path}",
    "temp_file_cleaned": "üóëÔ∏è –í—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª —É–¥–∞–ª–µ–Ω: {path}",
}

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
INFO_MESSAGES = {
    "waiting_photo": "üì∏ –Ø –∂–¥—É —Ñ–æ—Ç–æ, –ø—Ä–∏—à–ª–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ.",
    "no_active_invoice": "‚ÑπÔ∏è –£ –≤–∞—Å –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –Ω–∞–∫–ª–∞–¥–Ω–æ–π.\n\n–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /start –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã.",
    "folder_exists": "üìÅ –ü–∞–ø–∫–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: {path}",
    "write_test_warning": "‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: –≤–æ–∑–º–æ–∂–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∞–≤–∞–º–∏ –∑–∞–ø–∏—Å–∏ –≤ –ø–∞–ø–∫—É.",
    "approaching_limit": "‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ! –ü—Ä–∏–±–ª–∏–∂–∞–µ—Ç—Å—è –ª–∏–º–∏—Ç —Ñ–æ—Ç–æ –¥–ª—è –Ω–∞–∫–ª–∞–¥–Ω–æ–π '{invoice}'\n–û—Å—Ç–∞–ª–æ—Å—å: {remaining} —Ñ–æ—Ç–æ",
}

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
STATS_MESSAGES = {
    "bot_stats": "üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–æ—Ç–∞**\n\n‚è±Ô∏è –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã: {uptime}\nüë• –ê–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: {users}\nüìã –ê–∫—Ç–∏–≤–Ω—ã—Ö –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö: {invoices}\nüì∏ –í—Å–µ–≥–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ —Ñ–æ—Ç–æ: {photos}\nüì∏ –§–æ—Ç–æ –≤ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö: {photos_in_invoices}\nüìã –í—Å–µ–≥–æ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö: {total_invoices}\n‚ùå –û—à–∏–±–æ–∫: {errors}\n\nüîÑ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /reset –¥–ª—è —Å–±—Ä–æ—Å–∞ –Ω–∞–∫–ª–∞–¥–Ω–æ–π\nüîç –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /status –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–µ—Ä–≤–∏—Å–æ–≤",
    "bot_status": "üîç **–°—Ç–∞—Ç—É—Å –±–æ—Ç–∞**\n\n‚úÖ **Telegram Bot**: –ê–∫—Ç–∏–≤–µ–Ω\n‚úÖ **–Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫**: –ü–æ–¥–∫–ª—é—á–µ–Ω\nüìÅ **–ë–∞–∑–æ–≤–∞—è –ø–∞–ø–∫–∞**: {base_folder_status}\n\nüíæ **–ú–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ:**\n‚Ä¢ –°–≤–æ–±–æ–¥–Ω–æ: {free_space}\n‚Ä¢ –í—Å–µ–≥–æ: {total_space}\n‚Ä¢ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ: {used_percent}%\n\nüìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**\n‚Ä¢ –§–æ—Ç–æ: {photos}\n‚Ä¢ –ù–∞–∫–ª–∞–¥–Ω—ã–µ: {invoices}\n‚Ä¢ –û—à–∏–±–∫–∏: {errors}",
    "current_invoice": "üìã **–¢–µ–∫—É—â–∞—è –Ω–∞–∫–ª–∞–¥–Ω–∞—è**\n\nüî¢ –ù–æ–º–µ—Ä: {invoice}\nüì∏ –ó–∞–≥—Ä—É–∂–µ–Ω–æ —Ñ–æ—Ç–æ: {count}\nüì∏ –û—Å—Ç–∞–ª–æ—Å—å —Ñ–æ—Ç–æ: {remaining}\nüìÅ –ü–∞–ø–∫–∞: {folder}\n\n{status}",
}

# –°–ø—Ä–∞–≤–∫–∞
HELP_MESSAGE = """ü§ñ **–°–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º**

/start - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –Ω–æ–≤–æ–π –Ω–∞–∫–ª–∞–¥–Ω–æ–π
/reset - –°–±—Ä–æ—Å–∏—Ç—å —Ç–µ–∫—É—â—É—é –Ω–∞–∫–ª–∞–¥–Ω—É—é
/current - –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â—É—é –Ω–∞–∫–ª–∞–¥–Ω—É—é
/stats - –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –±–æ—Ç–∞
/status - –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å –±–æ—Ç–∞ –∏ —Å–µ—Ä–≤–∏—Å–æ–≤
/help - –ü–æ–∫–∞–∑–∞—Ç—å —ç—Ç—É —Å–ø—Ä–∞–≤–∫—É

üìã **–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ /start
2. –í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –Ω–∞–∫–ª–∞–¥–Ω–æ–π
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
4. –§–æ—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è –Ω–∞ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫

‚ö†Ô∏è **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
‚Ä¢ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: {max_file_size}
‚Ä¢ –ú–∞–∫—Å–∏–º—É–º —Ñ–æ—Ç–æ –Ω–∞ –Ω–∞–∫–ª–∞–¥–Ω—É—é: {max_photos}
‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: JPG, JPEG, PNG

üîß **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:**
‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /current –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç–µ–∫—É—â–µ–π –Ω–∞–∫–ª–∞–¥–Ω–æ–π
‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /status –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /stats –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
‚Ä¢ –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ /reset –¥–ª—è —Å–±—Ä–æ—Å–∞

üëë **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:**
‚Ä¢ /cleanup - –û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤"""
